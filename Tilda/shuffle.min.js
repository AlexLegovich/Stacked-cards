document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".stacked-card"),e=document.querySelector(".shuffle-btn"),r=document.querySelector(".stacked-cards"),n=t.length;cursorImageUrl&&(r.style.cursor=`url(${cursorImageUrl}), grab`);let s=0,a=!1,o=-1;e.style.zIndex=n+1;let l=document.querySelector(".current .tn-atom"),c=document.querySelector(".total .tn-atom");function d(){l&&(l.textContent=s+1)}function i(e){let r=t[s];a||(a=!0,t.forEach(t=>t.classList.remove("active")),r.classList.add("active"),r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=`translateX(${movePercent*e}%)`,setTimeout(()=>{r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=s%2==1?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`,setTimeout(()=>{t.forEach(t=>{let e=parseInt(t.style.zIndex);t.style.zIndex=e<n?e+1:1}),s=(s+1)%n,d(),a=!1},0)},backTime))}c&&(c.textContent=n),t.forEach((t,e)=>{t.style.zIndex=n-e,t.style.transform=e%2==1?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`}),t[s].classList.add("active"),d(),e.addEventListener("click",()=>{i(o),o*=-1,m()});let y=document.querySelector(".stacked__cards-list"),_=new Hammer(y);_.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),_.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL}),_.on("panstart",()=>{let e=t[s];e.style.transition="none"}),_.on("panmove",e=>{let r=t[s];r.style.transform=`translateX(${e.deltaX}px)`}),_.on("panend",e=>{let r=t[s];Math.abs(e.deltaX)>15?(i(e.deltaX>0?1:-1),m()):(r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=s%2==1?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`)}),_.on("swipe",t=>{t.direction===Hammer.DIRECTION_LEFT&&i(-1),t.direction===Hammer.DIRECTION_RIGHT&&i(1)});let f;function m(){clearInterval(f),f=setInterval(()=>{autoplay?e.click():clearInterval(f)},autoPlayDelay)}m()});