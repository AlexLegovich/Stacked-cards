document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".shuffle-card"),t=document.querySelector(".shuffle-btn"),r=document.querySelector(".shuffle-cards"),n=e.length,l=document.querySelector(".shuffle-left"),s=document.querySelector(".shuffle-right"),a=[t,l,s].filter(Boolean);swipe&&(r.style.cursor=cursorImageUrl&&""!==cursorImageUrl.trim()?`url(${cursorImageUrl}), grab`:"grab"),SwipeListener(r,{minHorizontal:0,minVertical:0,preventScroll:!1}),swipe&&r.addEventListener("swipe",e=>{let{directions:t}=e.detail;t.left?_(-1):t.right&&_(1),g()});let o=0,i=!1,f=-1;a.forEach(e=>e.style.zIndex=n+1);let c=document.querySelector(".shuffle-current .tn-atom"),d=document.querySelector(".shuffle-total .tn-atom");function u(){c&&(c.textContent=o+1)}function _(t){if(i)return;i=!0;let r=e[o];r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=`translateX(${movePercent*t}%)`,setTimeout(()=>{r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=o%2?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`,setTimeout(()=>{e.forEach(e=>{let t=parseInt(e.style.zIndex);e.style.zIndex=t<n?t+1:1}),o=(o+1)%n,u(),i=!1},0)},backTime)}function y(){window.matchMedia(`(max-width:${breakPoint}px)`).matches?(forwardTime=forwardTimeMobile,backTime=backTimeMobile):(forwardTime,backTime)}d&&(d.textContent=n),e.forEach((e,t)=>{e.style.zIndex=n-t,e.style.transform=t%2?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`}),u(),y(),window.addEventListener("resize",y),t&&t.addEventListener("click",()=>{_(f),f*=-1,g()}),l&&l.addEventListener("click",()=>{_(f=-1),g()}),s&&s.addEventListener("click",()=>{_(f=1),g()});let h;function m(e,t){e&&_(t)}function g(){clearInterval(h),h=setInterval(()=>{if(!autoplay)return clearInterval(h);t?t.click():(1===f?m(s,1):m(l,-1),f*=-1)},autoPlayDelay)}g()});