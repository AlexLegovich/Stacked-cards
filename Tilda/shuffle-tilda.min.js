document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".shuffle-card"),t=document.querySelector(".shuffle-btn"),r=document.querySelector(".shuffle-cards"),n=e.length,l=document.querySelector(".shuffle-left"),o=document.querySelector(".shuffle-right"),s=[t,l,o].filter(Boolean);s.forEach(e=>{e.style.cursor="pointer"}),swipe&&(r.style.cursor=cursorImageUrl&&""!==cursorImageUrl.trim()?`url(${cursorImageUrl}), grab`:"grab"),SwipeListener(r,{minHorizontal:0,minVertical:0,preventScroll:!1}),swipe&&r.addEventListener("swipe",e=>{let{directions:t}=e.detail;t.left?y(-1):t.right&&y(1),E()});let a=0,i=!1,c=-1;s.forEach(e=>e.style.zIndex=n+1);let f=document.querySelector(".shuffle-current .tn-atom"),d=document.querySelector(".shuffle-total .tn-atom");function u(){f&&(f.textContent=a+1)}function y(t){if(i)return;i=!0;let r=e[a];r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=`translateX(${movePercent*t}%)`,setTimeout(()=>{r.style.transition=`transform ${forwardTime}ms ${easing}`,r.style.transform=a%2?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`,setTimeout(()=>{e.forEach(e=>{let t=parseInt(e.style.zIndex);e.style.zIndex=t<n?t+1:1}),a=(a+1)%n,u(),i=!1},0)},backTime)}function _(){window.matchMedia(`(max-width:${breakPoint}px)`).matches?(forwardTime=forwardTimeMobile,backTime=backTimeMobile):(forwardTime,backTime)}d&&(d.textContent=n),e.forEach((e,t)=>{e.style.zIndex=n-t,e.style.transform=t%2?`rotate(${cardRotateAngle}deg)`:`rotate(${-cardRotateAngle}deg)`}),u(),_(),window.addEventListener("resize",_),t&&t.addEventListener("click",()=>{y(c),c*=-1,E()}),l&&l.addEventListener("click",()=>{y(c=-1),E()}),o&&o.addEventListener("click",()=>{y(c=1),E()});let h;function m(e,t){e&&y(t)}function E(){clearInterval(h),h=setInterval(()=>{if(!autoplay)return clearInterval(h);t?t.click():(1===c?m(o,1):m(l,-1),c*=-1)},autoPlayDelay)}E()});